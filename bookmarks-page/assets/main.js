import{j as e,r as g,u as D,c as W}from"./useBookmarks.js";function A({value:t,onChange:n,placeholder:s}){return e.jsxs("div",{className:"search-bar",children:[e.jsxs("svg",{className:"search-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e.jsx("input",{type:"text",className:"search-input",value:t,onChange:a=>n(a.target.value),placeholder:s||"Search by title, channel, or keywords..."})]})}function V(){const[t,n]=g.useState(()=>localStorage.getItem("yt-bookmark-theme")||"dark");g.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("yt-bookmark-theme",t)},[t]);const s=()=>{n(a=>a==="dark"?"light":"dark")};return e.jsx("button",{className:"theme-toggle",onClick:s,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,title:`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}function I({searchQuery:t,onSearchChange:n,onExport:s,onImport:a}){const l=g.useRef(null),o=()=>{l.current?.click()},r=i=>{const d=i.target.files?.[0];d&&(a(d),i.target.value="")};return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),e.jsx("span",{className:"logo-text",children:"YT Mark"})]}),e.jsxs("div",{className:"header-right",children:[e.jsx(A,{value:t,onChange:n,placeholder:"Search by title, channel, or keywords..."}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:s,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),"Export"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:o,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Import CSV"]}),e.jsx("input",{ref:l,type:"file",accept:".csv",onChange:r,style:{display:"none"}}),e.jsx(V,{}),e.jsx("button",{className:"btn-icon",title:"Settings",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]})]})]})})}function z({value:t,onChange:n}){return e.jsxs("div",{className:"sort-dropdown",children:[e.jsx("label",{htmlFor:"sort-select",className:"sort-label",children:"Sort by:"}),e.jsxs("select",{id:"sort-select",className:"sort-select",value:t,onChange:s=>n(s.target.value),children:[e.jsx("option",{value:"date-desc",children:"Date Added (Newest)"}),e.jsx("option",{value:"date-asc",children:"Date Added (Oldest)"}),e.jsx("option",{value:"channel",children:"Channel A-Z"}),e.jsx("option",{value:"title",children:"Title A-Z"})]})]})}function E({total:t,showing:n,sortOption:s,onSortChange:a,selectionMode:l,onToggleSelectionMode:o}){return e.jsxs("div",{className:"stats-bar",children:[e.jsxs("div",{className:"stats-left",children:[e.jsxs("span",{className:"stat",children:["Total Bookmarks: ",e.jsx("span",{className:"stat-value",children:t})]}),e.jsxs("span",{className:"stat",children:["Showing: ",e.jsxs("span",{className:"stat-value",children:[n," results"]})]})]}),e.jsxs("div",{className:"stats-right",children:[e.jsx("button",{className:`select-btn ${l?"active":""}`,onClick:o,children:l?"Cancel":"Select"}),e.jsx(z,{value:s,onChange:a})]})]})}function U(t){const n=new Date(t),a=new Date-n,l=Math.floor(a/1e3),o=Math.floor(l/60),r=Math.floor(o/60),i=Math.floor(r/24),d=Math.floor(i/7);return Math.floor(i/30)>0?n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):d>0?`${d} week${d>1?"s":""} ago`:i>0?`${i} day${i>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:o>0?`${o} minute${o>1?"s":""} ago`:"Just now"}function O(t){const n=Math.floor(t/3600),s=Math.floor(t%3600/60),a=t%60;return n>0?`${n}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${s}:${a.toString().padStart(2,"0")}`}function R({bookmark:t,onDelete:n,selectionMode:s,isSelected:a,onSelect:l}){const o=`https://i.ytimg.com/vi/${t.video_id}/mqdefault.jpg`,r=`https://www.youtube.com/watch?v=${t.video_id}`,i=t.video_url,d=c=>{c.stopPropagation(),s||window.open(i,"_blank")},m=c=>{c.stopPropagation(),!s&&t.channel_url&&window.open(t.channel_url,"_blank")},w=()=>{s?l?.(t.id):window.open(r,"_blank")},j=c=>{c.stopPropagation(),n?.(t.id)},p=c=>{c.stopPropagation(),l?.(t.id)},x=t.video_duration_seconds||t.timestamp_seconds,u=["bookmark-card",s&&"selection-mode",a&&"selected",t.watched&&"watched"].filter(Boolean).join(" ");return e.jsxs("article",{className:u,onClick:w,children:[s&&e.jsx("div",{className:"card-checkbox",onClick:p,children:e.jsx("div",{className:`checkbox ${a?"checked":""}`,children:a&&e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),e.jsxs("div",{className:"card-thumbnail",children:[e.jsx("img",{src:o,alt:t.video_title,loading:"lazy"}),e.jsx("span",{className:"duration-badge",children:O(x)}),t.watched&&e.jsxs("span",{className:"watched-badge",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Watched"]})]}),e.jsxs("div",{className:"card-channel",children:[e.jsxs("div",{className:`channel-link ${t.channel_url?"clickable":""}`,onClick:m,title:t.channel_url?"Visit channel":"",children:[e.jsx("div",{className:"channel-avatar",children:t.channel_avatar?e.jsx("img",{src:t.channel_avatar,alt:t.channel_name}):e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})})}),e.jsx("span",{className:"channel-name",children:t.channel_name})]}),e.jsx("span",{className:"card-date",children:U(t.created_at)})]}),e.jsx("h3",{className:"card-title",children:t.video_title}),e.jsxs("div",{className:"card-footer",children:[e.jsxs("button",{className:"timestamp-badge",onClick:d,title:"Jump to timestamp",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),t.timestamp_hh_mm_ss]}),!s&&e.jsx("button",{className:"delete-btn",onClick:j,title:"Delete bookmark",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]})}function H({bookmarks:t,onDelete:n,selectionMode:s,selectedIds:a,onSelect:l}){return t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:e.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}),e.jsx("h3",{className:"empty-title",children:"No bookmarks found"}),e.jsxs("p",{className:"empty-text",children:["Try adjusting your search or add bookmarks on YouTube with ",e.jsx("kbd",{children:"Ctrl+Shift+L"})]})]}):e.jsx("div",{className:"bookmark-grid",children:t.map(o=>e.jsx(R,{bookmark:o,onDelete:n,selectionMode:s,isSelected:a.has(o.id),onSelect:l},o.id))})}function P({selectedCount:t,onMarkWatched:n,onMarkUnwatched:s,onDelete:a,onCancel:l}){return t===0?null:e.jsxs("div",{className:"bulk-action-bar",children:[e.jsx("div",{className:"bulk-action-info",children:e.jsxs("span",{className:"selected-count",children:[t," selected"]})}),e.jsxs("div",{className:"bulk-action-buttons",children:[e.jsxs("button",{className:"bulk-btn bulk-btn-watched",onClick:n,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Mark Watched"]}),e.jsxs("button",{className:"bulk-btn bulk-btn-unwatched",onClick:s,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17.94 17.94C16.28 19.19 14.23 20 12 20c-7 0-11-8-11-8a21.3 21.3 0 0 1 5.06-6.06M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a21.3 21.3 0 0 1-2.16 3.19"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),"Mark Unwatched"]}),e.jsxs("button",{className:"bulk-btn bulk-btn-delete",onClick:a,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Delete"]}),e.jsx("button",{className:"bulk-btn bulk-btn-cancel",onClick:l,children:"Cancel"})]})]})}function F({isOpen:t,title:n,message:s,confirmText:a,cancelText:l,onConfirm:o,onCancel:r,variant:i}){return t?e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:d=>d.stopPropagation(),children:[e.jsx("h3",{className:"modal-title",children:n}),e.jsx("p",{className:"modal-message",children:s}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:r,children:l||"Cancel"}),e.jsx("button",{className:`modal-btn modal-btn-confirm ${i==="danger"?"danger":""}`,onClick:o,children:a||"Confirm"})]})]})}):null}function f(t){if(t==null)return"";const n=String(t);return n.includes('"')||n.includes(",")||n.includes(`
`)||n.includes("\r")?'"'+n.replace(/"/g,'""')+'"':n}function q(t){const n=[];let s="",a=!1;for(let l=0;l<t.length;l++){const o=t[l];o==='"'?a=!a:o===","&&!a?(n.push(s),s=""):s+=o}return n.push(s),n}function Q(t){if(t.length===0){alert("No bookmarks to export!");return}const n="video_id,video_title,channel_name,timestamp_seconds,timestamp_hh_mm_ss,video_url,created_at,video_duration_seconds",s=t.map(i=>[f(i.video_id),f(i.video_title),f(i.channel_name),f(i.timestamp_seconds),f(i.timestamp_hh_mm_ss),f(i.video_url),f(i.created_at),f(i.video_duration_seconds||"")].join(",")),a=[n,...s].join(`
`),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(l),r=document.createElement("a");r.href=o,r.download=`youtube-bookmarks-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(o)}function J(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function Y(t){return new Promise((n,s)=>{const a=new FileReader;a.onload=l=>{try{const d=l.target.result.split(`
`).slice(1).filter(m=>m.trim()).map(m=>{const[w,j,p,x,u,c,y,v]=q(m);return{id:J(),video_id:w,video_title:j.replace(/^"|"$/g,"").replace(/""/g,'"'),channel_name:p.replace(/^"|"$/g,"").replace(/""/g,'"'),timestamp_seconds:parseInt(x)||0,timestamp_hh_mm_ss:u,video_url:c,created_at:y,video_duration_seconds:v?parseInt(v):null}});n(d)}catch(o){s(o)}},a.onerror=()=>s(new Error("Failed to read file")),a.readAsText(t)})}function Z(){const{bookmarks:t,filteredBookmarks:n,loading:s,searchQuery:a,setSearchQuery:l,sortOption:o,setSortOption:r,deleteBookmark:i,importBookmarks:d,bulkSetWatched:m,bulkDelete:w}=D(),[j,p]=g.useState(!1),[x,u]=g.useState(new Set),[c,y]=g.useState({isOpen:!1,title:"",message:"",confirmText:"",onConfirm:null,variant:"danger"});g.useEffect(()=>{const h=localStorage.getItem("yt-bookmark-theme")||"dark";document.documentElement.setAttribute("data-theme",h)},[]);const v=()=>{y(h=>({...h,isOpen:!1}))},N=()=>{j&&u(new Set),p(!j)},b=h=>{u(C=>{const k=new Set(C);return k.has(h)?k.delete(h):k.add(h),k})},S=async()=>{await m(Array.from(x),!0),u(new Set),p(!1)},_=async()=>{await m(Array.from(x),!1),u(new Set),p(!1)},B=()=>{const h=x.size;y({isOpen:!0,title:"Delete Bookmarks",message:`Are you sure you want to delete ${h} bookmark${h>1?"s":""}? This action cannot be undone.`,confirmText:"Delete",variant:"danger",onConfirm:async()=>{await w(Array.from(x)),u(new Set),p(!1),v()}})},M=h=>{y({isOpen:!0,title:"Delete Bookmark",message:"Are you sure you want to delete this bookmark? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:async()=>{await i(h),v()}})},L=()=>{u(new Set),p(!1)},$=()=>{Q(t)},T=async h=>{try{const C=await Y(h),k=await d(C);alert(k.message)}catch(C){alert("Error importing CSV: "+C.message)}};return s?e.jsx("div",{className:"app",children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading bookmarks..."})]})}):e.jsxs("div",{className:"app",children:[e.jsx(I,{searchQuery:a,onSearchChange:l,onExport:$,onImport:T}),e.jsxs("main",{className:"main-content",children:[e.jsx(E,{total:t.length,showing:n.length,sortOption:o,onSortChange:r,selectionMode:j,onToggleSelectionMode:N}),e.jsx(H,{bookmarks:n,onDelete:M,selectionMode:j,selectedIds:x,onSelect:b})]}),j&&e.jsx(P,{selectedCount:x.size,onMarkWatched:S,onMarkUnwatched:_,onDelete:B,onCancel:L}),e.jsx(F,{isOpen:c.isOpen,title:c.title,message:c.message,confirmText:c.confirmText,variant:c.variant,onConfirm:c.onConfirm,onCancel:v})]})}W.createRoot(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Z,{})}));
