import{j as e,r as f,u as O,c as W}from"./useBookmarks.js";function A({value:t,onChange:s,placeholder:n}){return e.jsxs("div",{className:"search-bar",children:[e.jsxs("svg",{className:"search-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e.jsx("input",{type:"text",className:"search-input",value:t,onChange:a=>s(a.target.value),placeholder:n||"Search by title, channel, or keywords..."})]})}function E(){const[t,s]=f.useState(()=>localStorage.getItem("yt-bookmark-theme")||"dark");f.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("yt-bookmark-theme",t)},[t]);const n=()=>{s(a=>a==="dark"?"light":"dark")};return e.jsx("button",{className:"theme-toggle",onClick:n,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,title:`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}function z({searchQuery:t,onSearchChange:s,onExport:n,onImport:a}){const o=f.useRef(null),l=()=>{o.current?.click()},r=i=>{const h=i.target.files?.[0];h&&(a(h),i.target.value="")};return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{className:"logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),e.jsx("span",{className:"logo-text",children:"Marker"})]}),e.jsxs("div",{className:"header-right",children:[e.jsx(A,{value:t,onChange:s,placeholder:"Search by title, channel, or keywords..."}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn btn-primary",onClick:n,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),"Export"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:l,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Import CSV"]}),e.jsx("input",{ref:o,type:"file",accept:".csv",onChange:r,style:{display:"none"}}),e.jsx(E,{})]})]})]})})}function U({value:t,onChange:s}){return e.jsxs("div",{className:"sort-dropdown",children:[e.jsx("label",{htmlFor:"sort-select",className:"sort-label",children:"Sort by:"}),e.jsxs("select",{id:"sort-select",className:"sort-select",value:t,onChange:n=>s(n.target.value),children:[e.jsx("option",{value:"date-desc",children:"Date Added (Newest)"}),e.jsx("option",{value:"date-asc",children:"Date Added (Oldest)"}),e.jsx("option",{value:"channel",children:"Channel A-Z"}),e.jsx("option",{value:"title",children:"Title A-Z"})]})]})}function V({total:t,showing:s,sortOption:n,onSortChange:a,selectionMode:o,onToggleSelectionMode:l}){return e.jsxs("div",{className:"stats-bar",children:[e.jsxs("div",{className:"stats-left",children:[e.jsxs("span",{className:"stat",children:["Total Bookmarks: ",e.jsx("span",{className:"stat-value",children:t})]}),e.jsxs("span",{className:"stat",children:["Showing: ",e.jsxs("span",{className:"stat-value",children:[s," results"]})]})]}),e.jsxs("div",{className:"stats-right",children:[e.jsx("button",{className:`select-btn ${o?"active":""}`,onClick:l,children:o?"Cancel":"Select"}),e.jsx(U,{value:n,onChange:a})]})]})}function R(t){const s=new Date(t),a=new Date-s,o=Math.floor(a/1e3),l=Math.floor(o/60),r=Math.floor(l/60),i=Math.floor(r/24),h=Math.floor(i/7);return Math.floor(i/30)>0?s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):h>0?`${h} week${h>1?"s":""} ago`:i>0?`${i} day${i>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:l>0?`${l} minute${l>1?"s":""} ago`:"Just now"}function P(t){const s=Math.floor(t/3600),n=Math.floor(t%3600/60),a=t%60;return s>0?`${s}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}`}function F({bookmark:t,onDelete:s,selectionMode:n,isSelected:a,onSelect:o}){const l=`https://i.ytimg.com/vi/${t.video_id}/mqdefault.jpg`,r=`https://www.youtube.com/watch?v=${t.video_id}`,i=t.video_url,h=c=>{c.stopPropagation(),n||window.open(i,"_blank")},u=c=>{c.stopPropagation(),!n&&t.channel_url&&window.open(t.channel_url,"_blank")},w=()=>{n?o?.(t.id):window.open(r,"_blank")},p=c=>{c.stopPropagation(),s?.(t.id)},j=c=>{c.stopPropagation(),o?.(t.id)},x=t.video_duration_seconds||t.timestamp_seconds,m=["bookmark-card",n&&"selection-mode",a&&"selected",t.watched&&"watched"].filter(Boolean).join(" ");return e.jsxs("article",{className:m,onClick:w,children:[n&&e.jsx("div",{className:"card-checkbox",onClick:j,children:e.jsx("div",{className:`checkbox ${a?"checked":""}`,children:a&&e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})}),e.jsxs("div",{className:"card-thumbnail",children:[e.jsx("img",{src:l,alt:t.video_title,loading:"lazy"}),e.jsx("span",{className:"duration-badge",children:P(x)}),t.watched&&e.jsxs("span",{className:"watched-badge",children:[e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"Watched"]})]}),e.jsxs("div",{className:"card-channel",children:[e.jsxs("div",{className:`channel-link ${t.channel_url?"clickable":""}`,onClick:u,title:t.channel_url?"Visit channel":"",children:[e.jsx("div",{className:"channel-avatar",children:t.channel_avatar?e.jsx("img",{src:t.channel_avatar,alt:t.channel_name}):e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"})})}),e.jsx("span",{className:"channel-name",children:t.channel_name})]}),e.jsx("span",{className:"card-date",children:R(t.created_at)})]}),e.jsx("h3",{className:"card-title",children:t.video_title}),e.jsxs("div",{className:"card-footer",children:[e.jsxs("button",{className:"timestamp-badge",onClick:h,title:"Jump to timestamp",children:[e.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),t.timestamp_hh_mm_ss]}),!n&&e.jsx("button",{className:"delete-btn",onClick:p,title:"Delete bookmark",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})]})}function H({bookmarks:t,onDelete:s,selectionMode:n,selectedIds:a,onSelect:o}){return t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:e.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})})}),e.jsx("h3",{className:"empty-title",children:"No bookmarks found"}),e.jsxs("p",{className:"empty-text",children:["Try adjusting your search or add bookmarks on YouTube with ",e.jsx("kbd",{children:"Ctrl+Shift+L"})]})]}):e.jsx("div",{className:"bookmark-grid",children:t.map(l=>e.jsx(F,{bookmark:l,onDelete:s,selectionMode:n,isSelected:a.has(l.id),onSelect:o},l.id))})}function q({selectedCount:t,onMarkWatched:s,onMarkUnwatched:n,onDelete:a,onCancel:o}){return t===0?null:e.jsxs("div",{className:"bulk-action-bar",children:[e.jsx("div",{className:"bulk-action-info",children:e.jsxs("span",{className:"selected-count",children:[t," selected"]})}),e.jsxs("div",{className:"bulk-action-buttons",children:[e.jsxs("button",{className:"bulk-btn bulk-btn-watched",onClick:s,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Mark Watched"]}),e.jsxs("button",{className:"bulk-btn bulk-btn-unwatched",onClick:n,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M17.94 17.94C16.28 19.19 14.23 20 12 20c-7 0-11-8-11-8a21.3 21.3 0 0 1 5.06-6.06M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a21.3 21.3 0 0 1-2.16 3.19"}),e.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),"Mark Unwatched"]}),e.jsxs("button",{className:"bulk-btn bulk-btn-delete",onClick:a,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),"Delete"]}),e.jsx("button",{className:"bulk-btn bulk-btn-cancel",onClick:o,children:"Cancel"})]})]})}function Q({isOpen:t,title:s,message:n,confirmText:a,cancelText:o,onConfirm:l,onCancel:r,variant:i}){return t?e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[e.jsx("h3",{className:"modal-title",children:s}),e.jsx("p",{className:"modal-message",children:n}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"modal-btn modal-btn-cancel",onClick:r,children:o||"Cancel"}),e.jsx("button",{className:`modal-btn modal-btn-confirm ${i==="danger"?"danger":""}`,onClick:l,children:a||"Confirm"})]})]})}):null}function J({isOpen:t,title:s,message:n,buttonText:a,onClose:o,variant:l}){return t?e.jsx("div",{className:"modal-overlay",onClick:o,children:e.jsxs("div",{className:"modal-content",onClick:r=>r.stopPropagation(),children:[e.jsx("h3",{className:"modal-title",children:s}),e.jsx("p",{className:"modal-message",children:n}),e.jsx("div",{className:"modal-actions modal-actions-single",children:e.jsx("button",{className:`modal-btn modal-btn-confirm ${l==="danger"?"danger":l==="success"?"success":""}`,onClick:o,children:a||"OK"})})]})}):null}function g(t){if(t==null)return"";const s=String(t);return s.includes('"')||s.includes(",")||s.includes(`
`)||s.includes("\r")?'"'+s.replace(/"/g,'""')+'"':s}function Z(t){const s=[];let n="",a=!1;for(let o=0;o<t.length;o++){const l=t[o];l==='"'?a=!a:l===","&&!a?(s.push(n),n=""):n+=l}return s.push(n),s}function G(t){if(t.length===0){alert("No bookmarks to export!");return}const s="video_id,video_title,channel_name,timestamp_seconds,timestamp_hh_mm_ss,video_url,created_at,video_duration_seconds",n=t.map(i=>[g(i.video_id),g(i.video_title),g(i.channel_name),g(i.timestamp_seconds),g(i.timestamp_hh_mm_ss),g(i.video_url),g(i.created_at),g(i.video_duration_seconds||"")].join(",")),a=[s,...n].join(`
`),o=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(o),r=document.createElement("a");r.href=l,r.download=`youtube-bookmarks-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(l)}function K(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=Math.random()*16|0;return(t==="x"?s:s&3|8).toString(16)})}function Y(t){return new Promise((s,n)=>{const a=new FileReader;a.onload=o=>{try{const h=o.target.result.split(`
`).slice(1).filter(u=>u.trim()).map(u=>{const[w,p,j,x,m,c,y,v]=Z(u);return{id:K(),video_id:w,video_title:p.replace(/^"|"$/g,"").replace(/""/g,'"'),channel_name:j.replace(/^"|"$/g,"").replace(/""/g,'"'),timestamp_seconds:parseInt(x)||0,timestamp_hh_mm_ss:m,video_url:c,created_at:y,video_duration_seconds:v?parseInt(v):null}});s(h)}catch(l){n(l)}},a.onerror=()=>n(new Error("Failed to read file")),a.readAsText(t)})}function X(){const{bookmarks:t,filteredBookmarks:s,loading:n,searchQuery:a,setSearchQuery:o,sortOption:l,setSortOption:r,deleteBookmark:i,importBookmarks:h,bulkSetWatched:u,bulkDelete:w}=O(),[p,j]=f.useState(!1),[x,m]=f.useState(new Set),[c,y]=f.useState({isOpen:!1,title:"",message:"",confirmText:"",onConfirm:null,variant:"danger"}),[v,N]=f.useState({isOpen:!1,title:"",message:"",variant:"success"});f.useEffect(()=>{const d=localStorage.getItem("yt-bookmark-theme")||"dark";document.documentElement.setAttribute("data-theme",d)},[]);const b=()=>{y(d=>({...d,isOpen:!1}))},S=()=>{p&&m(new Set),j(!p)},_=d=>{m(C=>{const k=new Set(C);return k.has(d)?k.delete(d):k.add(d),k})},M=async()=>{await u(Array.from(x),!0),m(new Set),j(!1)},B=async()=>{await u(Array.from(x),!1),m(new Set),j(!1)},$=()=>{const d=x.size;y({isOpen:!0,title:"Delete Bookmarks",message:`Are you sure you want to delete ${d} bookmark${d>1?"s":""}? This action cannot be undone.`,confirmText:"Delete",variant:"danger",onConfirm:async()=>{await w(Array.from(x)),m(new Set),j(!1),b()}})},L=d=>{y({isOpen:!0,title:"Delete Bookmark",message:"Are you sure you want to delete this bookmark? This action cannot be undone.",confirmText:"Delete",variant:"danger",onConfirm:async()=>{await i(d),b()}})},T=()=>{m(new Set),j(!1)},D=()=>{G(t)},I=async d=>{try{const C=await Y(d),k=await h(C);N({isOpen:!0,title:"Import Successful",message:k.message,variant:"success"})}catch(C){N({isOpen:!0,title:"Import Failed",message:"Error importing CSV: "+C.message,variant:"danger"})}};return n?e.jsx("div",{className:"app",children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading bookmarks..."})]})}):e.jsxs("div",{className:"app",children:[e.jsx(z,{searchQuery:a,onSearchChange:o,onExport:D,onImport:I}),e.jsxs("main",{className:"main-content",children:[e.jsx(V,{total:t.length,showing:s.length,sortOption:l,onSortChange:r,selectionMode:p,onToggleSelectionMode:S}),e.jsx(H,{bookmarks:s,onDelete:L,selectionMode:p,selectedIds:x,onSelect:_})]}),p&&e.jsx(q,{selectedCount:x.size,onMarkWatched:M,onMarkUnwatched:B,onDelete:$,onCancel:T}),e.jsx(Q,{isOpen:c.isOpen,title:c.title,message:c.message,confirmText:c.confirmText,variant:c.variant,onConfirm:c.onConfirm,onCancel:b}),e.jsx(J,{isOpen:v.isOpen,title:v.title,message:v.message,variant:v.variant,onClose:()=>N(d=>({...d,isOpen:!1}))})]})}W.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(X,{})}));
